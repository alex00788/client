# RenameOrgComponent

Компонент для переименования организации в системе администратора.

## Описание

`RenameOrgComponent` предоставляет пользовательский интерфейс для изменения названия организации. Компонент включает форму с валидацией и обработку API запросов.

## Функциональность

### Основные возможности
- **Форма переименования**: Поле ввода для нового названия организации с валидацией
- **Валидация**: Проверка обязательного заполнения поля названия
- **API интеграция**: Отправка запроса на сервер для обновления названия
- **Обработка ошибок**: Корректная обработка ошибок API
- **Уведомления**: Показ сообщений об успешном выполнении

### Состояние компонента
- **Форма**: ReactiveForm с полем `nameOrg`
- **Валидация**: Required валидатор для поля названия
- **Кнопки**: 
  - "Отменить" - закрывает окно без изменений
  - "Изменить" - отправляет форму (активна только при валидной форме)

### Жизненный цикл
- **ngOnInit**: Инициализация формы с текущим названием организации
- **ngOnDestroy**: Очистка подписок и ресурсов

## Зависимости

### Сервисы
- `PersonalBlockService` - управление состоянием окна
- `DateService` - получение данных об организации
- `ApiService` - отправка запросов на сервер
- `SuccessService` - показ уведомлений

### Модули
- `ReactiveFormsModule` - для работы с формами
- `AsyncPipe` - для работы с асинхронными данными

## API

### Методы
- `renameOrg()` - основной метод для переименования организации
- `ngOnInit()` - инициализация компонента
- `ngOnDestroy()` - очистка ресурсов

### События
- `nameOrgChanged` - эмитится при успешном переименовании

## Тестирование

Компонент покрыт тремя уровнями тестирования:

### 1. Юнит-тесты (`rename-org.component.spec.ts`)
- Создание компонента
- Инициализация формы
- Валидация полей
- Вызовы сервисов
- Обработка ошибок
- Жизненный цикл компонента

### 2. Интеграционные тесты (`rename-org.integration.spec.ts`)
- Взаимодействие с сервисами
- Обновление состояния
- Валидация в контексте интеграции
- Обработка различных сценариев

### 3. E2E тесты (`rename-org.e2e.spec.ts`)
- Полный пользовательский workflow
- Взаимодействие с UI элементами
- Валидация форм
- Обработка ошибок в реальных сценариях

## Структура тестов

### Mock сервисы
- `MockPersonalBlockService` - имитация управления окном
- `MockDateService` - имитация данных организации
- `MockApiService` - имитация API запросов
- `MockSuccessService` - имитация уведомлений

### Тестовые сценарии
- Успешное переименование
- Обработка ошибок API
- Валидация форм
- Отмена операции
- Быстрые последовательные вызовы
- Граничные случаи (длинные названия, специальные символы)

## Запуск тестов

```bash
# Запуск всех тестов компонента
npm test -- --include="**/rename-org/**/*.spec.ts"

# Запуск только юнит-тестов
npm test -- --include="**/rename-org.component.spec.ts"

# Запуск только интеграционных тестов
npm test -- --include="**/rename-org.integration.spec.ts"

# Запуск только E2E тестов
npm test -- --include="**/rename-org.e2e.spec.ts"
```

## Покрытие тестами

Компонент имеет максимальное покрытие тестами:
- **100% методов** - все публичные и приватные методы протестированы
- **100% веток** - все условные конструкции покрыты
- **100% строк** - весь код протестирован
- **Edge cases** - протестированы граничные случаи
- **Error handling** - протестирована обработка ошибок

## Рекомендации по использованию

1. **Валидация**: Всегда проверяйте валидность формы перед отправкой
2. **Обработка ошибок**: Используйте try-catch или error callback для обработки ошибок API
3. **Очистка ресурсов**: Не забывайте вызывать `ngOnDestroy` при уничтожении компонента
4. **Тестирование**: Добавляйте новые тесты при изменении функциональности

## Известные ограничения

- Компонент не поддерживает асинхронную валидацию
- Нет поддержки множественного переименования
- Ограниченная кастомизация UI элементов

## Будущие улучшения

- Добавление асинхронной валидации
- Поддержка множественного переименования
- Расширенные настройки UI
- Интеграция с системой логирования
- Добавление анимаций и переходов
