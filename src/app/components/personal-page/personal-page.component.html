<div class="personalPageStyle">

  <div class="currentSelectedOrg">
    <app-select-org-to-display
      (orgWasChange)=" switchOrg()"
    ></app-select-org-to-display>
    <div class="cowerTitlePersonal">
      <div class="btnOutAndText">
        <strong class="btnLogoutSystemsClass" (click)="logoutSystems()"> &times; </strong>
        <span class="btnOut" (click)="logoutSystems()"> выйти </span>
      </div>
    </div>
  </div>

  <div class="imgOrgCower">
    <!--           меняем при деплое-->
               <img class="imgPerson" src="http://записькпрофи.рф/{{photoCurrentOrg}}" style="object-fit: cover" alt="Загрузите фото" height="170" width="100%">
<!--    <img *ngIf="hidePhotoCurrentOrg" class="imgOrg" src="http://localhost:3000/{{photoCurrentOrg}}" alt="Загрузите фото" height="170" width="100%">-->
<!--      <img *ngIf="hidePhotoCurrentOrg" class="imgOrg" src="assets/img/mySelf.png" height="170" width="100%">-->
  </div>

  <div *ngIf="currentOrgHasEmployees"  style="color: white">
    <app-select-org-direction
      (clickedOnEmployee)="clickedOnEmployee($event)"
      (dataAboutEmployee)="handOverData($event)"
      (idSelectedOrg)="getIdSelectedOrg($event)"
    ></app-select-org-direction>
  </div>

  <div class="errorModal insideClass">
    <app-error-modal></app-error-modal>
  </div>

  <div class="wrapSuccessModalPersonalPage">
    <app-success-modal class="successModalPersonalPage"></app-success-modal>
  </div>

  <div class="btnMainMenu" *ngIf="hideBtn">
    <div class="mainBtnNav">
      <span class="btnHome" (click)="routerLinkMain()">
      <svg width="20" height="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.98 1.984l7 6h-2.003v6H9.96V10.97H5.997v3.016H2.982v-6H.979l7-6z" fill="red"></path>
      </svg>
    </span>
      <span class="myData" *ngIf="!personalBlockService.personalData" (click)="personalBlockService.switchData()">
        Мои данные
      </span>
      <span class="myData" *ngIf="personalBlockService.personalData" style="color: red" (click)="personalBlockService.switchData()">
       &times;
      </span>
      <span class="btnHome" style="color: red" (click)="logoutSystems()">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M6.11743 0.114227C8.44294 -0.0380757 10.7423 -0.0380757 13.0679 0.114227C14.6111 0.215296 15.7922 1.47819 15.8706 3.00911C16.0791 7.08565 16.0196 11.1294 15.7605 15.1949C15.7303 15.6671 15.323 16.0257 14.8507 15.9955C14.3784 15.9655 14.0199 15.5581 14.05 15.0858C14.3057 11.076 14.3636 7.09851 14.1589 3.09666C14.1229 2.39326 13.5912 1.8661 12.9558 1.82449C10.7049 1.67708 8.48035 1.67708 6.22944 1.82449C5.59407 1.8661 5.06237 2.39326 5.02638 3.09666C5.00536 3.50745 4.98711 3.91796 4.97156 4.32827C4.95365 4.80122 4.55572 5.17009 4.08277 5.15216C3.60981 5.13425 3.24096 4.73632 3.25887 4.26337C3.27471 3.84558 3.29329 3.42751 3.31469 3.00911C3.39301 1.47819 4.57421 0.215296 6.11743 0.114227ZM10.2624 3.14683C9.7424 2.84658 9.21631 2.73888 8.72582 2.8703C8.23531 3.00172 7.83356 3.35805 7.53332 3.87809C7.23308 4.39812 7.12538 4.92421 7.2568 5.4147C7.38822 5.90521 7.74455 6.30696 8.26459 6.60721C8.78462 6.90744 9.31071 7.01516 9.8012 6.88372C10.2917 6.7523 10.6935 6.39597 10.9937 5.87594C11.2939 5.35591 11.4017 4.82981 11.2702 4.33932C11.1388 3.84882 10.7825 3.44706 10.2624 3.14683ZM7.30557 7.48571C5.09208 6.3207 2.85697 6.5305 1.80563 7.92188C1.52031 8.29949 1.59512 8.83691 1.97273 9.12224C2.35034 9.40756 2.88776 9.33275 3.17308 8.95514C3.44154 8.59985 4.27125 8.20689 5.57687 8.61087L3.85814 11.0897C3.42719 11.6619 3.00879 11.8706 2.62098 11.9399C2.19301 12.0165 1.69934 11.9419 1.10516 11.7623C0.652124 11.6253 0.17384 11.8815 0.036888 12.3346C-0.100065 12.7875 0.156175 13.2658 0.609215 13.4028C1.29229 13.6093 2.09691 13.7747 2.9228 13.627C3.78627 13.4726 4.5743 12.9948 5.23982 12.104C5.24586 12.0959 5.25178 12.0878 5.25754 12.0794L5.29396 12.0269C5.73467 12.3999 6.09788 12.8742 6.37492 13.3755C6.78053 14.1093 6.94443 14.7961 6.94443 15.1433C6.94443 15.6165 7.3281 16.0002 7.80139 16.0002C8.27468 16.0002 8.65836 15.6165 8.65836 15.1433C8.65836 14.4231 8.3743 13.4498 7.87497 12.5464C7.49926 11.8667 6.97024 11.1688 6.27377 10.6138L7.10596 9.41351L7.13885 9.4369C7.44936 9.65759 7.84293 9.92923 8.28168 10.1676C9.12654 10.6265 10.3461 11.0751 11.5842 10.5539C12.0203 10.3702 12.2251 9.86771 12.0415 9.43151C11.8577 8.99531 11.3553 8.79058 10.9191 8.97424C10.4264 9.18166 9.82103 9.05326 9.09977 8.66148C8.75548 8.47446 8.4307 8.25234 8.13174 8.03986C8.08857 8.00919 8.04369 7.97698 7.99774 7.94401C7.7656 7.77742 7.50635 7.59138 7.30557 7.48571Z" fill="red"/>
      </svg>
    </span>
    </div>
  </div>

  <div class="bodyCalendarElementClass" >
    <app-personal-data-block
      *ngIf="personalBlockService.personalData"
      (photoAdded)="getAllOrg()"
    ></app-personal-data-block>
  </div>


  <div class="btnMainMenu" *ngIf="dateService.currentUserIsTheAdminOrg.value">
    <button class="btnSettingsRecords"
            *ngIf="!personalBlockService.clientListBlock"
            (click)="personalBlockService.openClientList()"
    > Мои клиенты
    </button>
  </div>
  <div *ngIf="personalBlockService.clientListBlock && dateService.currentUserIsTheAdminOrg.value ">
    <app-clients-list></app-clients-list>
  </div>


  <div *ngIf="hideBtn">
    <div class="btnMainMenu">
      <button class="btnSettingsRecords"
              *ngIf="!personalBlockService.recordsBlock"
              (click)="personalBlockService.openRecordsBlock()"
      >
        Мои записи
        в {{dateService.date.value.format('M') | translateMonth}}
      </button>
    </div>
    <div>
      <app-records-block></app-records-block>
    </div>
  </div>



  <div class="btnMainMenu" *ngIf="dateService.currentUserIsTheAdminOrg.value">
    <button class="btnSettingsRecords"
            *ngIf="personalBlockService.settingsBtn"
            (click)="personalBlockService.switchSettingsData()">
      Настройки
    </button>
  </div>
  <div class="bodyCalendarElementClass" >
    <app-settings-block
      [dataAboutEmployee] = "dataAboutEmployee"
      *ngIf="dateService.currentUserIsTheAdminOrg.value"></app-settings-block>
  </div>

  <div *ngIf="hideBtn">
    <div *ngIf="dateService.currentUserIsTheMainAdmin | async">
      <div class="btnMainMenu">
        <button class="btnSettingsRecords" (click)="openSettingsOrg()">
          <p style="color: red">
            ORG settings
          </p>
        </button>
      </div>
    </div>
  </div>

  <div class="settingsOrg" *ngIf="settingsOrg" >
    <div *ngIf="dateService.currentUserIsTheMainAdmin | async">
      <div class="btnMainMenu" *ngIf="!personalBlockService.windowAddingNewOrgIsOpen">
        <button class="btnSettingsRecords" (click)="personalBlockService.addNewOrgSettings()">
          Добавить ORG
        </button>
      </div>
      <div class="bodyCalendarElementClass" *ngIf="personalBlockService.windowAddingNewOrgIsOpen">
        <app-add-new-org (emitForOrgUpdatesAfterAddingNew)="getAllOrg()"></app-add-new-org>
      </div>
    </div>

    <div *ngIf="dateService.currentUserIsTheMainAdmin | async">
      <div class="btnMainMenu" *ngIf="!personalBlockService.windowRenameOrgIsOpen">
        <button class="btnSettingsRecords" (click)="personalBlockService.renameCurrentOrg()">
          Переименовать ORG
        </button>
      </div>
      <div class="bodyCalendarElementClass" *ngIf="personalBlockService.windowRenameOrgIsOpen">
        <app-rename-org (nameOrgChanged)="getAllOrg()"></app-rename-org>
      </div>
    </div>

    <div *ngIf="dateService.currentUserIsTheMainAdmin | async">
      <div class="btnMainMenu">
        <button class="btnSettingsRecords" (click)="forcedCleaning()">
          Принудительная чистка БД
        </button>
      </div>
    </div>

    <div *ngIf="dateService.currentUserIsTheMainAdmin | async"  >
      <div class="btnMainMenu">
        <button class="btnSettingsRecords" (click)="deleteTestDataSwitch()">
          Удалить все связанное с email
        </button>
      </div>
      <form [formGroup]="formDeleteData" (submit)="removeTestData()" *ngIf="deleteData" class="deleteTestData">
        <input type="text" style="margin: 10px" (input)="clearTrim($event)" formControlName="dataEmail" placeholder="email">
        <button class="btnSettingsRecords" type="submit"  *ngIf="formDeleteData.valid">!!!Удалить безвозвратно!!!</button>
      </form>
    </div>
  </div>

  <div class="btnMainMenu">
    <button
      class="btnSettingsRecords" *ngIf="!dateService.calendarBodyOpen.value" (click)="dateService.openCalendar()">
      Календарь
    </button>
  </div>
  <div class="bodyCalendarElementClass calendarNum" *ngIf="dateService.calendarBodyOpen | async">
    <div class="cowerBodyCalendar">
      <button class="btnCloseInfoBlock" (click)="switchCalendar()">
        &times;
      </button>
      <app-header-calendar></app-header-calendar>
      <app-body-calendar></app-body-calendar>
    </div>
  </div>

  <div class="showRecCurrentOrg" *ngIf="recordingService.recordsBlock.value">
    <div class="dateNowAndSelected">
      <app-day-week-month></app-day-week-month>
    </div>

    <div class="dateNowAndSelected" *ngIf="recordingService.showCurrentDay.value">
      <app-info-block></app-info-block>
    </div>

    <div class="dateNowAndSelected" *ngIf="recordingService.showCurrentWeek.value">
      <app-switch-of-the-week></app-switch-of-the-week>
    </div>

    <div class="dateNowAndSelected">
      <div class="dataCalendar">
        <app-data-calendar-new [idSelectedOrgForRecInEmployee]="idSelectedOrgForRecInEmployee"
        ></app-data-calendar-new>
      </div>
    </div>
  </div>

</div>


<div *ngIf="modalService.isVisible$ | async">
  <app-modal-window-for-person-page class="contentForModal">
    <app-data-person-modal *ngIf="modalService.clientListBlock | async"></app-data-person-modal>
    <app-modal-rename *ngIf="modalService.modalRenameUser | async"></app-modal-rename>
    <app-data-about-rec *ngIf="modalService.recordsBlock | async"></app-data-about-rec>
  </app-modal-window-for-person-page>
</div>


